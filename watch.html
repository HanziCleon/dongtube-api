<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Watch Anime - DongTube</title>
    <link rel="icon" type="image/png" href="https://b.top4top.io/p_35449hn0x0.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <meta name="description" id="pageDescription" content="Watch anime episodes in HD quality with subtitles on DongTube">
    <meta property="og:title" id="ogTitle" content="Watch Anime - DongTube">
    <meta property="og:description" id="ogDescription" content="Stream anime episodes in HD quality">
    <meta property="og:image" id="ogImage" content="">
    <meta property="og:url" id="ogUrl" content="">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- Google Sign-In API -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="779631712094-6t77ptt5366r218o80pmijmeelboj25g.apps.googleusercontent.com">
    
     <style>
        :root {
            /* Dark theme with yellow accent */
            --bg: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 30%, #2a2a2a 60%, #3a3a3a 100%);
            --bg-secondary: rgba(15, 15, 15, 0.95);
            --card: rgba(25, 25, 25, 0.9);
            --card-hover: rgba(30, 30, 30, 0.95);
            --card-border: rgba(255, 255, 255, 0.08);
            --accent: #ffd700;
            --accent2: #ffb000;
            --accent-glow: rgba(255, 215, 0, 0.4);
            --text: #ffffff;
            --text-secondary: #b0b0b0;
            --text-muted: #808080;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            --radius: 16px;
            --radius-sm: 12px;
            --radius-xs: 8px;
            --transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            --shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
            --shadow-lg: 0 16px 40px rgba(0, 0, 0, 0.8);
            --glow: 0 0 30px var(--accent-glow);
            --backdrop-blur: blur(20px);
            --glass-border: rgba(255, 255, 255, 0.12);
            --glass-bg: rgba(255, 255, 255, 0.05);
        }

        [data-theme="light"] {
            --bg: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 30%, #dee2e6 60%, #ced4da 100%);
            --bg-secondary: rgba(248, 249, 250, 0.95);
            --card: rgba(255, 255, 255, 0.9);
            --card-hover: rgba(255, 255, 255, 0.98);
            --card-border: rgba(0, 0, 0, 0.08);
            --text: #212529;
            --text-secondary: #495057;
            --text-muted: #6c757d;
            --glass-border: rgba(0, 0, 0, 0.08);
            --glass-bg: rgba(0, 0, 0, 0.03);
            --shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 16px 40px rgba(0, 0, 0, 0.2);
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
            overflow-x: hidden;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            background-attachment: fixed;
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .bg-animation {
            position: fixed;
            inset: 0;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .floating-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(2px);
            opacity: 0.6;
            animation: float 20s infinite ease-in-out;
        }

        .orb-1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, var(--accent), transparent 70%);
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, var(--accent2), transparent 70%);
            top: 60%;
            right: 20%;
            animation-delay: -8s;
        }

        .orb-3 {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, var(--accent), transparent 70%);
            bottom: 30%;
            left: 60%;
            animation-delay: -15s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            25% { transform: translateY(-30px) rotate(90deg) scale(1.1); }
            50% { transform: translateY(20px) rotate(180deg) scale(0.9); }
            75% { transform: translateY(-40px) rotate(270deg) scale(1.05); }
        }

        .navbar {
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: var(--backdrop-blur);
            background: var(--glass-bg);
            border-bottom: 1px solid var(--glass-border);
            padding: 1rem 0;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .brand-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: var(--text);
            transition: var(--transition);
            padding: 0.5rem;
            border-radius: var(--radius-sm);
        }

        .brand-link:hover {
            background: var(--glass-bg);
            transform: scale(1.02);
        }

        .brand-icon {
            font-size: 2rem;
            filter: drop-shadow(var(--glow));
            animation: pulse-glow 3s infinite ease-in-out;
        }

        @keyframes pulse-glow {
            0%, 100% { filter: drop-shadow(0 0 15px var(--accent)); }
            50% { filter: drop-shadow(0 0 25px var(--accent)); }
        }

        .brand-text {
            font-size: 1.75rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }

        .nav-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--accent);
            text-align: center;
            max-width: 500px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            background: var(--card);
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius);
            border: 1px solid var(--card-border);
            backdrop-filter: var(--backdrop-blur);
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* User Profile Section */
        .user-profile {
            display: none;
            align-items: center;
            gap: 0.75rem;
            background: var(--card);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            border: 1px solid var(--card-border);
            backdrop-filter: var(--backdrop-blur);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }

        .user-profile:hover {
            background: var(--card-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--accent);
            object-fit: cover;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            min-width: 0;
        }

        .user-name {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text);
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .user-email {
            font-size: 0.75rem;
            color: var(--text-muted);
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card);
            border: 1px solid var(--card-border);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 2000;
            min-width: 200px;
            display: none;
            backdrop-filter: var(--backdrop-blur);
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .user-dropdown.show {
            display: block;
            animation: slideDown 0.2s ease;
        }

        .dropdown-header {
            padding: 1rem;
            border-bottom: 1px solid var(--card-border);
            background: var(--card-hover);
        }

        .dropdown-user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .dropdown-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--accent);
            object-fit: cover;
        }

        .dropdown-details {
            flex: 1;
            min-width: 0;
        }

        .dropdown-name {
            font-weight: 600;
            color: var(--text);
            font-size: 0.95rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .dropdown-email {
            font-size: 0.8rem;
            color: var(--text-muted);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .dropdown-item {
            padding: 0.875rem 1rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
        }

        .dropdown-item:hover {
            background: var(--glass-bg);
        }

        .dropdown-item.logout {
            color: var(--error);
            border-top: 1px solid var(--card-border);
        }

        .dropdown-item.logout:hover {
            background: rgba(239, 68, 68, 0.1);
        }

        /* Login Section */
        .login-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .google-signin-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.625rem 1.25rem;
            background: #4285f4;
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
            box-shadow: var(--shadow);
        }

        .google-signin-btn:hover {
            background: #357ae8;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .google-icon {
            width: 18px;
            height: 18px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="white" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="white" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="white" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>') no-repeat center;
            background-size: contain;
        }

        .nav-btn {
            width: 48px;
            height: 48px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            transition: var(--transition);
            backdrop-filter: var(--backdrop-blur);
        }

        .nav-btn:hover {
            color: white;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            border-color: var(--accent);
            transform: scale(1.05);
            box-shadow: var(--glow);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        .main-panel {
            background: var(--card);
            border: 1px solid var(--card-border);
            border-radius: var(--radius);
            overflow: hidden;
            backdrop-filter: var(--backdrop-blur);
            box-shadow: var(--shadow-lg);
            margin-bottom: 3rem;
        }

        .now-playing {
            padding: 1.5rem 2rem;
            background: var(--card-hover);
            border-bottom: 1px solid var(--card-border);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .now-playing::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--accent-glow), transparent);
            opacity: 0.3;
            z-index: -1;
        }

        .now-playing-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .live-badge {
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            animation: pulse-live 2s infinite ease-in-out;
            box-shadow: var(--glow);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        @keyframes pulse-live {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        #nowPlaying {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
            line-height: 1.3;
        }

        .player-container {
            position: relative;
            background: #000;
        }

        .player-wrapper {
            position: relative;
            aspect-ratio: 16/9;
            background: #000;
        }

        #videoPlayer {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        .player-loading {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--bg-secondary), var(--card));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            color: var(--text-secondary);
            z-index: 10;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--card-border);
            border-top: 4px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.125rem;
            font-weight: 500;
        }

        .video-controls {
            padding: 1.5rem 2rem;
            background: var(--card-hover);
            border-top: 1px solid var(--card-border);
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .engagement-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .video-info {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .quality-badge, .sub-badge {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            white-space: nowrap;
        }

        .quality-badge {
            background: var(--success);
            color: white;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
        }

        .sub-badge {
            background: var(--accent);
            color: white;
            box-shadow: var(--glow);
        }

        .engagement-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .like-dislike-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            padding: 0.25rem;
        }

        .engagement-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: transparent;
            border: none;
            border-radius: 50px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .engagement-btn:hover {
            background: var(--glass-bg);
            color: var(--text);
        }

        .engagement-btn.liked {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
        }

        .engagement-btn.disliked {
            background: rgba(239, 68, 68, 0.15);
            color: var(--error);
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);
        }

        .control-actions {
            display: flex;
            gap: 0.75rem;
        }

        .control-btn {
            width: 44px;
            height: 44px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 1.1rem;
        }

        .control-btn:hover,
        .control-btn.active {
            color: white;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            border-color: var(--accent);
            transform: scale(1.05);
            box-shadow: var(--glow);
        }

        .episode-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .nav-btn-inline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            border: none;
            border-radius: var(--radius);
            color: white;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--shadow);
            white-space: nowrap;
            min-width: 120px;
        }

        .nav-btn-inline:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg), var(--glow);
        }

        .nav-btn-inline:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            background: var(--text-muted);
            box-shadow: none;
        }

        .episodes-section {
            padding: 2rem;
            background: var(--card-hover);
            border-top: 1px solid var(--card-border);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
        }

        #episodeCount {
            color: var(--text-muted);
            font-weight: 600;
            font-size: 1rem;
        }

        .episodes-scroll {
            position: relative;
        }

        .episodes-container {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 0.5rem 0 1rem 0;
            scrollbar-width: thin;
            scrollbar-color: var(--accent) var(--glass-bg);
        }

        .episodes-container::-webkit-scrollbar {
            height: 8px;
        }

        .episodes-container::-webkit-scrollbar-track {
            background: var(--glass-bg);
            border-radius: 4px;
        }

        .episodes-container::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }

        .episode-item {
            background: var(--card);
            border: 2px solid var(--card-border);
            text-align: center;
            padding: 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            min-width: 120px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 0.5rem;
        }

        .episode-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            opacity: 0;
            transition: var(--transition);
        }

        .episode-item:hover::before {
            opacity: 0.1;
        }

        .episode-item:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow), var(--glow);
        }

        .episode-item.active {
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: white;
            border-color: var(--accent);
            box-shadow: var(--shadow-lg), var(--glow);
            font-weight: 600;
        }

        .episode-item.active::before {
            opacity: 0;
        }

        .episode-number {
            font-weight: 700;
            font-size: 1rem;
            position: relative;
            z-index: 1;
        }

        .episode-title {
            font-size: 0.8rem;
            opacity: 0.9;
            line-height: 1.3;
            position: relative;
            z-index: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .anime-info-content {
            display: flex;
            gap: 2rem;
            align-items: flex-start;
        }

        .anime-poster-small {
            width: 120px;
            height: 160px;
            border-radius: var(--radius);
            overflow: hidden;
            flex-shrink: 0;
            box-shadow: var(--shadow);
        }

        .anime-poster-small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .anime-details {
            flex: 1;
        }

        .anime-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .meta-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--card-border);
        }

        .meta-row:last-child {
            border-bottom: none;
        }

        .meta-row-label {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .meta-row-value {
            font-weight: 500;
            color: var(--text);
            font-size: 0.9rem;
        }

        .anime-description {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.95rem;
            max-height: 4.5em;
            overflow: hidden;
            transition: var(--transition);
        }

        .anime-description.expanded {
            max-height: none;
        }

        .description-fade {
            position: relative;
        }

        .description-fade:not(.expanded)::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1.5em;
            background: linear-gradient(transparent, var(--card-hover));
            pointer-events: none;
        }

        .comments-section {
            padding: 2rem;
            background: var(--card);
            border-top: 1px solid var(--card-border);
        }

        .comments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .comments-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .comment-count {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 1rem;
        }

        /* Google Authentication Enhancements */
        .google-verified {
            color: var(--success);
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            background: rgba(16, 185, 129, 0.1);
            padding: 0.2rem 0.5rem;
            border-radius: var(--radius-xs);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .comment-form {
            background: transparent;
            border: none;
            padding: 0;
            margin-bottom: 3rem;
        }

        .google-signin-prompt {
            text-align: center;
            padding: 1.5rem;
            background: var(--card-hover);
            border: 1px solid var(--card-border);
            border-radius: var(--radius);
            margin-bottom: 2rem;
        }

        .google-signin-prompt h4 {
            margin-bottom: 1rem;
            color: var(--text);
            font-size: 1.25rem;
        }

        .google-signin-prompt p {
            margin-bottom: 1.5rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .google-signin-prompt .google-signin-btn {
            margin-bottom: 1rem;
        }

        .google-signin-prompt .divider {
            margin: 1rem 0;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .comment-form-inner {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            flex-shrink: 0;
            font-size: 1.1rem;
            overflow: hidden;
            border: 2px solid var(--card-border);
        }

        .comment-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .comment-form input[readonly],
        .comment-form textarea[readonly] {
            background: var(--glass-bg) !important;
            border-color: var(--success) !important;
            cursor: not-allowed;
        }

        .comment-form input[readonly]::placeholder {
            color: var(--success);
        }

        .comment-input-area {
            flex: 1;
        }

        .comment-input-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .comment-name-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: none;
            border-bottom: 2px solid var(--card-border);
            background: transparent;
            color: var(--text);
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .comment-name-input:focus {
            outline: none;
            border-bottom-color: var(--accent);
        }

        .comment-api-input {
            width: 120px;
            padding: 0.75rem 1rem;
            border: none;
            border-bottom: 2px solid var(--card-border);
            background: transparent;
            color: var(--text);
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .comment-api-input:focus {
            outline: none;
            border-bottom-color: var(--accent);
        }

        .comment-textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: none;
            border-bottom: 2px solid var(--card-border);
            background: transparent;
            color: var(--text);
            font-size: 0.95rem;
            resize: none;
            min-height: 24px;
            max-height: 200px;
            transition: var(--transition);
            font-family: inherit;
            margin-bottom: 1rem;
        }

        .comment-textarea:focus {
            outline: none;
            border-bottom-color: var(--accent);
            min-height: 80px;
        }

        .comment-form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            opacity: 0;
            transition: var(--transition);
        }

        .comment-textarea:focus + .comment-form-actions,
        .comment-form-actions:hover,
        .comment-form-actions.show {
            opacity: 1;
        }

        .comment-cancel-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .comment-cancel-btn:hover {
            background: var(--glass-bg);
            color: var(--text);
        }

        .comment-submit-btn {
            background: var(--accent);
            border: none;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            opacity: 0.6;
        }

        .comment-submit-btn:not(:disabled):hover {
            background: var(--accent2);
            transform: translateY(-1px);
        }

        .comment-submit-btn:not(:disabled) {
            opacity: 1;
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .comment-item {
            background: transparent;
            border: none;
            padding: 0;
            position: relative;
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .comment-avatar-small {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            flex-shrink: 0;
            font-size: 1rem;
            overflow: hidden;
            border: 2px solid var(--card-border);
        }

        .comment-avatar-small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .comment-content {
            flex: 1;
            min-width: 0;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
            gap: 1rem;
        }

        .comment-author-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
            min-width: 0;
        }

        .comment-author {
            font-weight: 600;
            color: var(--text);
            font-size: 0.9rem;
            margin-right: 0.5rem;
        }

        .comment-date {
            color: var(--text-muted);
            font-size: 0.8rem;
            white-space: nowrap;
        }

        .comment-actions {
            position: relative;
        }

        .comment-menu-btn {
            background: transparent;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        .comment-menu-btn:hover {
            background: var(--glass-bg);
            color: var(--text);
        }

        .comment-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card);
            border: 1px solid var(--card-border);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            min-width: 140px;
            display: none;
            backdrop-filter: var(--backdrop-blur);
            margin-top: 0.25rem;
        }

        .comment-dropdown.show {
            display: block;
            animation: slideDown 0.2s ease;
        }

        .dropdown-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--error);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .dropdown-item:hover {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        .comment-text {
            color: var(--text);
            line-height: 1.4;
            font-size: 0.9rem;
            word-break: break-word;
        }

        .loading-comments {
            text-align: center;
            color: var(--text-muted);
            padding: 3rem;
            font-style: italic;
            font-size: 1.1rem;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: var(--backdrop-blur);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: var(--card);
            border: 1px solid var(--card-border);
            border-radius: var(--radius);
            padding: 0;
            max-width: 450px;
            width: 90%;
            box-shadow: var(--shadow-lg);
            backdrop-filter: var(--backdrop-blur);
            animation: modalSlideIn 0.3s ease;
            overflow: hidden;
        }

        .modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--card-border);
            background: var(--card-hover);
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-body p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .modal-input {
            width: 100%;
            padding: 1rem 1.25rem;
            border: 2px solid var(--card-border);
            border-radius: var(--radius-sm);
            background: var(--glass-bg);
            color: var(--text);
            font-size: 0.95rem;
            transition: var(--transition);
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
        }

        .modal-actions {
            padding: 1.5rem 2rem;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            border-top: 1px solid var(--card-border);
            background: var(--card-hover);
        }

        .btn-cancel {
            background: var(--glass-bg);
            color: var(--text-secondary);
            border: 1px solid var(--card-border);
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .btn-cancel:hover {
            background: var(--text-muted);
            color: white;
        }

        .btn-delete {
            background: linear-gradient(135deg, var(--error), #dc2626);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .btn-delete:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--error);
            color: var(--error);
            padding: 0.75rem 1rem;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            margin-top: 1rem;
        }

        .toast-container {
            position: fixed;
            top: 100px;
            right: 2rem;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .toast {
            background: var(--card);
            border: 1px solid var(--card-border);
            border-radius: var(--radius);
            padding: 1rem 1.5rem;
            color: var(--text);
            box-shadow: var(--shadow-lg);
            backdrop-filter: var(--backdrop-blur);
            transform: translateX(400px);
            opacity: 0;
            animation: slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            max-width: 350px;
            position: relative;
            font-weight: 500;
        }

        .toast::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--info);
        }

        .toast.success::before {
            background: var(--success);
        }

        .toast.error::before {
            background: var(--error);
        }

        .toast.warning::before {
            background: var(--warning);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes slideIn {
            0% {
                transform: translateX(400px);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .error-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .error-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            opacity: 0.6;
        }

        .error-state h2 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 1rem;
        }

        .error-state p {
            font-size: 1.125rem;
            margin-bottom: 2rem;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg), var(--glow);
        }

        @media (max-width: 768px) {
            .container {
                padding: 0.5rem;
            }
            
            .nav-container {
                padding: 0 1rem;
            }
            
            .nav-title {
                display: none;
            }
            
            .user-profile {
                padding: 0.375rem 0.75rem;
            }
            
            .user-info {
                display: none;
            }
            
            .user-dropdown {
                right: -1rem;
            }
            
            .google-signin-btn {
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
            }
            
            .now-playing {
                padding: 1rem 1.5rem;
            }
            
            .video-controls {
                padding: 1.25rem 1.5rem;
            }
            
            .engagement-section {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }
            
            .engagement-buttons {
                justify-content: space-between;
            }
            
            .episode-nav {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .nav-btn-inline {
                justify-content: center;
                min-width: auto;
            }
            
            .episodes-section,
            .comments-section,
            .anime-info-section {
                padding: 1.5rem;
            }
            
            .anime-info-content {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .anime-poster-small {
                align-self: center;
            }
            
            .anime-meta {
                grid-template-columns: 1fr;
            }
            
            .comment-form-inner {
                gap: 0.75rem;
            }
            
            .comment-avatar {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
            
            .comment-input-row {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .comment-api-input {
                width: 100%;
            }
            
            .comment-item {
                gap: 0.75rem;
            }
            
            .comment-avatar-small {
                width: 32px;
                height: 32px;
                font-size: 0.9rem;
            }
            
            .comment-header {
                flex-direction: column;
                gap: 0.5rem;
                align-items: flex-start;
            }
            
            .comment-actions {
                align-self: flex-end;
                position: absolute;
                top: 0;
                right: 0;
            }
            
            .comment-dropdown {
                right: 0;
                transform: translateX(0);
                left: auto;
            }
            
            .toast-container {
                right: 1rem;
                left: 1rem;
                top: 80px;
            }
            
            .toast {
                max-width: none;
            }
            
            .modal-header,
            .modal-body,
            .modal-actions {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0.25rem;
            }
            
            .now-playing {
                padding: 1rem;
            }
            
            .video-controls {
                padding: 1rem;
            }
            
            .episodes-section,
            .comments-section,
            .anime-info-section {
                padding: 1rem;
            }
            
            .comment-form-inner {
                gap: 0.5rem;
            }
            
            .comment-avatar {
                width: 28px;
                height: 28px;
                font-size: 0.9rem;
            }
            
            .comment-item {
                gap: 0.5rem;
            }
            
            .comment-avatar-small {
                width: 28px;
                height: 28px;
                font-size: 0.85rem;
            }
            
            .modal-actions {
                flex-direction: column;
            }
            
            .btn-cancel,
            .btn-delete {
                width: 100%;
                text-align: center;
            }
        }

        ::selection {
            background: var(--accent);
            color: white;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--glass-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: var(--radius-xs);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent2);
        }

        * {
            scrollbar-width: thin;
            scrollbar-color: var(--accent) var(--glass-bg);
        }
    </style>
</head>
<body class="watch-page">

    <div class="bg-animation">
        <div class="floating-orb orb-1"></div>
        <div class="floating-orb orb-2"></div>
        <div class="floating-orb orb-3"></div>
    </div>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="/" class="brand-link" aria-label="DongTube Homepage">
                    <span class="brand-icon">ðŸŽ¬</span>
                    <span class="brand-text">DongTube</span>
                </a>
            </div>
            <div class="nav-title" id="animeTitle">Loading...</div>
            <div class="nav-actions">
                <!-- User Profile (shown when logged in) -->
                <div id="userProfile" class="user-profile" style="display: none;">
                    <img id="userAvatar" class="user-avatar" src="" alt="User Avatar">
                    <div class="user-info">
                        <div class="user-name" id="userName"></div>
                        <div class="user-email" id="userEmail"></div>
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-header">
                            <div class="dropdown-user-info">
                                <img id="dropdownAvatar" class="dropdown-avatar" src="" alt="User Avatar">
                                <div class="dropdown-details">
                                    <div class="dropdown-name" id="dropdownName"></div>
                                    <div class="dropdown-email" id="dropdownEmail"></div>
                                </div>
                            </div>
                        </div>
                        <div class="dropdown-item" onclick="googleSignOut()">
                            <span>ðŸšª</span> Sign Out
                        </div>
                    </div>
                </div>

                <!-- Login Section (shown when not logged in) -->
                <div id="loginSection" class="login-section">
                    <button class="google-signin-btn" onclick="googleSignIn()">
                        <div class="google-icon"></div>
                        Sign in
                    </button>
                </div>

                <button id="themeSwitcher" class="nav-btn" title="Toggle Theme">ðŸŒ™</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="main-panel">
            <section class="now-playing">
                <div class="now-playing-info">
                    <span class="live-badge">
                        <span>ðŸ”´</span>
                        Now Watching
                    </span>
                    <h2 id="nowPlaying">Loading Episode...</h2>
                </div>
            </section>

            <div class="player-container">
                <div class="player-wrapper">
                    <iframe id="videoPlayer" 
                            src="" 
                            frameborder="0" 
                            allowfullscreen 
                            allow="autoplay; encrypted-media" 
                            title="Anime Video Player">
                    </iframe>
                    <div class="player-loading" id="playerLoading">
                        <div class="spinner"></div>
                        <span class="loading-text">Loading episode...</span>
                    </div>
                </div>
            </div>
            
            <div class="video-controls">
                <div class="engagement-section">
                    <div class="video-info">
                        <span class="quality-badge">HD</span>
                        <span class="sub-badge">SUB</span>
                    </div>
                    
                    <div class="engagement-buttons">
                        <div class="like-dislike-group">
                            <button class="engagement-btn" id="likeBtn">
                                <span>ðŸ‘</span>
                                <span id="likeCount">0</span>
                            </button>
                            <button class="engagement-btn" id="dislikeBtn">
                                <span>ðŸ‘Ž</span>
                                <span id="dislikeCount">0</span>
                            </button>
                        </div>
                        
                        <div class="control-actions">
                            <button class="control-btn" id="favoriteBtn" title="Add to Favorites">â¤ï¸</button>
                            <button class="control-btn" id="shareBtn" title="Share Episode">ðŸ”—</button>
                            <button class="control-btn" id="fullscreenBtn" title="Enter Fullscreen">â›¶</button>
                        </div>
                    </div>
                </div>
                
                <div class="episode-nav">
                    <button id="prevEp" class="nav-btn-inline">
                        <span>â®ª</span> Previous
                    </button>
                    <button id="nextEp" class="nav-btn-inline">
                        Next <span>â®«</span>
                    </button>
                </div>
            </div>

            <div class="episodes-section">
                <div class="section-header">
                    <h3 class="section-title">Episodes</h3>
                    <span id="episodeCount">(0)</span>
                </div>
                
                <div class="episodes-scroll">
                    <div id="episodes" class="episodes-container">
                    </div>
                </div>
            </div>

            <div class="anime-info-section">
                <div class="anime-info-header">
                    <h3 class="anime-info-title">About This Anime</h3>
                    <button class="expaninfo-section {
            padding: 2rem;
            background: var(--card-hover);
            border-top: 1px solid var(--card-border);
        }

        .anime-info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .anime-info-title {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
        }

        .expand-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-sm);
            padding: 0.5rem 1rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .expand-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .anime-